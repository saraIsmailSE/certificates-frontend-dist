{"version":3,"file":"js/3055.8c796395.js","mappings":"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","sources":["webpack://osboha180/./src/api/thesisServices.js","webpack://osboha180/./src/views/Theses/update.vue","webpack://osboha180/./src/views/Theses/update.vue?67d7"],"sourcesContent":["import { api } from \"./Intercepter\"\r\nimport userInfoService from \"../services/userInfo.service\";\r\nexport default {\r\n  createThesis: async (thesis, userbook_id) => {\r\n    let formData = new FormData();\r\n    formData.append(\"thesis_text\", thesis.text);\r\n    formData.append(\"ending_page\", thesis.pageEnd);\r\n    formData.append(\"starting_page\", thesis.pageStart);\r\n    formData.append(\"user_book_id\", userbook_id);\r\n    formData.append(\"images[]\", thesis.image_1);\r\n    const response = await api.post(\"/thesises\", formData, {\r\n      headers: {\r\n        \"Content-Type\": \"multipart/form-data\",\r\n      },\r\n    }).catch(error => {\r\n\r\n      console.log(error)\r\n    }\r\n    )\r\n    return response;\r\n  },\r\n\r\n\r\n  updatePicture: async (image, path) => {\r\n    let formData = new FormData();\r\n    formData.append(\"path\", path);\r\n    formData.append(\"image\", image);\r\n\r\n    const response = await api.post(\"/thesises/update-photo\", formData, {\r\n      headers: {\r\n        \"Content-Type\": \"multipart/form-data\",\r\n      },\r\n    }).catch(error => {\r\n\r\n      console.log(error)\r\n    }\r\n    )\r\n    return response.data.data;\r\n  },\r\n  reviewThesis: async (id) => {\r\n    const res = await api\r\n      .patch(`/thesises/review-thesis/${id}`)\r\n \r\n  },\r\n  deleteThesis(id) {\r\n    const response = api.delete(`/thesises/${id}`)\r\n    return response;\r\n  },\r\n  acceptThesis(id,status) {\r\n    let thesisId, user_book_id=null\r\n    if(status == 'accept'){\r\n      thesisId=id\r\n\r\n    }\r\n    else if(status == 'audit'){\r\n      user_book_id=id\r\n    }\r\n    const response = api.post(\"/thesises/review\", {\r\n      id: thesisId,\r\n      user_book_id: user_book_id,\r\n      status: status,\r\n      reviewer_id: userInfoService.getUser().id\r\n    })\r\n    return response;\r\n  },\r\n  rejectRetardThesis(id, note,status) {\r\n    const response = api.post(\"/thesises/review\", {\r\n      id: id,\r\n      status: status,\r\n      reviewer_id: userInfoService.getUser().id,\r\n      reviews: note\r\n    })\r\n    return response;\r\n  },\r\n  addDegree(id, note, mark) {\r\n    const response = api.patch(`/thesises/add-degree/${id}`, {\r\n      auditor_id: userInfoService.getUser().id,\r\n      reviews: note,\r\n      degree: mark\r\n      \r\n    })\r\n    return response;\r\n\r\n  },\r\n  updateThesis: async (thesis, id) => {\r\n    const response = await api.patch(`thesises/${id}`, thesis).catch(error => {\r\n\r\n\r\n      console.log(error)\r\n    }\r\n    )\r\n    return response;\r\n  },\r\n  getById: async (id) => {\r\n    const response = await api.get(`thesises/${id}`);\r\n \r\n    return response.data.data;\r\n  },\r\n  getByBook: async (bookID) => {\r\n    const thesis = await api.get(`thesises/book/${bookID}`);\r\n \r\n    return thesis.data.data;\r\n  },\r\n  getByUserBookStatus: async (status) => {\r\n\r\n    const thesis = await api.get(`thesises/by-status/${status}`);\r\n    (thesis.data)\r\n    return thesis.data.data;\r\n  },\r\n  getByUserBook : async (user_book_id ,status) => {\r\n \r\n    const thesis = await api.get(`thesises/user_book_id/${user_book_id}&${status}`);\r\n    (thesis.data)\r\n    return thesis.data.data;\r\n},\r\n  deletePhoto: async (id) => {\r\n    const response = await api.delete(`thesises/photo/${id}`);\r\n  },\r\n\r\n  getPhotosCount: async (user_book_id) => {\r\n    const response = await api.get(`thesises/photo-count/${user_book_id}`);\r\n    return response.data.data;\r\n   \r\n  },\r\n\r\n\r\n  uploadPhoto: async (image, id) => {\r\n    let formData = new FormData();\r\n   \r\n    formData.append(\"image\", image);\r\n    const response = await api.post(`/thesises/upload/${id}`, formData, {\r\n      headers: {\r\n        \"Content-Type\": \"multipart/form-data\",\r\n      },\r\n    }).catch(error => {\r\n\r\n      console.log(error)\r\n    }\r\n    ) \r\n    return response;\r\n  },\r\n\r\n }\r\n\r\n","<template>\r\n  <div>\r\n   <div class=\"col-sm-12 mt-3\">\r\n    <iq-card class=\"iq-card\">\r\n      <div class=\"iq-card-header-toolbar d-flex align-items-center mx-auto\">\r\n        <h3 class=\"text-center mt-3 mb-3\">تعديل الاطروحة</h3>\r\n      </div>\r\n      <div class=\"iq-card-body p-3\">\r\n        <div class=\"image-block text-center\">\r\n          <img\r\n            src=\"@/assets/images/update-forms.png\"\r\n            class=\"img-fluid rounded w-50\"\r\n            alt=\"blog-img\"\r\n          />\r\n        </div>\r\n\r\n        <div\r\n          class=\"d-flex align-items-center mt-3\"\r\n          v-if=\"\r\n            thesisToupdate.status == null || thesisToupdate.status == 'retard'\r\n          \"\r\n        >\r\n          <form @submit.prevent=\"submit\" class=\"post-text ml-3 w-100 row\">\r\n            <div class=\"form-group col-6\">\r\n              <select\r\n                class=\"form-select\"\r\n                data-trigger\r\n                name=\"choices-single-default\"\r\n                id=\"choices-single-default\"\r\n                v-model=\"v$.thesis.starting_page.$model\"\r\n              >\r\n                <option value=\"\">اختر صفحة البداية</option>\r\n                <option\r\n                  v-for=\"(i, index) in book.pages\"\r\n                  :key=\"index\"\r\n                  :value=\"i\"\r\n                >\r\n                  {{ i }}\r\n                </option>\r\n              </select>\r\n              <small style=\"color: red\" v-if=\"v$.thesis.starting_page.$error\">{{\r\n                pageError ? pageError : \" الرجاء قم بادخال صفحة البداية\"\r\n              }}</small>\r\n            </div>\r\n            <div class=\"form-group col-6\">\r\n              <select\r\n                class=\"form-select\"\r\n                data-trigger\r\n                name=\"choices-single-default\"\r\n                id=\"choices-single-default\"\r\n                v-model=\"v$.thesis.ending_page.$model\"\r\n              >\r\n                <option value=\"\">اختر صفحة النهاية</option>\r\n                <option\r\n                  v-for=\"(i, index) in book.pages\"\r\n                  :key=\"index\"\r\n                  :value=\"i\"\r\n                >\r\n                  {{ i }}\r\n                </option>\r\n              </select>\r\n              <small style=\"color: red\" v-if=\"v$.thesis.ending_page.$error\">{{\r\n                pageError ? pageError : \" الرجاء قم بادخال صفحة النهاية\"\r\n              }}</small>\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label class=\"form-label\" for=\"thesisBody\">الأطروحة</label>\r\n              <textarea\r\n                rows=\"5\"\r\n                placeholder=\"... اكتب أطروحتك\"\r\n                class=\"rounded form-control\"\r\n                id=\"thesisBody\"\r\n                v-model=\"v$.thesis.text.$model\"\r\n              ></textarea>\r\n              <p style=\"color: red\" v-if=\"v$.thesis.text.$error\">\r\n                لطفًا قم بكتابة اطروحة عدد حروفها بين 500 و 1800 خالية من الرموز التعبيرية (emojis)\r\n              </p>\r\n            </div>\r\n\r\n            <div class=\"col-sm-12 text-center\" v-if=\"loader\">\r\n              <img\r\n                src=\"../../assets/images/page-img/page-load-loader.gif\"\r\n                alt=\"loader\"\r\n                style=\"height: 100px\"\r\n              />\r\n            </div>\r\n            <h4 class=\"text-center mt-3 mb-3\" v-if=\"message\">{{ message }}</h4>\r\n            <div class=\"d-inline-block w-100 text-center\">\r\n              <button\r\n                type=\"\"\r\n                @click=\"back()\"\r\n                class=\"btn d-block btn-primary mt-3 mb-3 w-75 mx-auto\"\r\n                v-if=\"message\"\r\n              >\r\n                عودة لصفحة الأنجاز\r\n              </button>\r\n              <input\r\n                type=\"submit\"\r\n                value=\"تعديل\"\r\n                href=\"javascript:void(0);\"\r\n                class=\"btn btn-primary d-block mt-3 w-100\"\r\n                v-else\r\n              />\r\n            </div>\r\n          </form>\r\n        </div>\r\n\r\n        <div class=\"d-flex align-items-center mt-3 row\" v-else>\r\n          <h4 class=\"text-center mt-3 mb-3 col-12\">\r\n            لا يمكنك تعديل السؤال لأنه في حالة التقييم أو تم تقييمه\r\n          </h4>\r\n          <div class=\"d-inline-block w-100 text-center col-12\">\r\n            <button\r\n              type=\"\"\r\n              @click=\"back()\"\r\n              class=\"btn d-block btn-primary mt-3 mb-3 w-75 mx-auto\"\r\n            >\r\n              عودة لصفحة الأنجاز\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </iq-card>\r\n  </div>\r\n\r\n  \r\n  <div class=\"col-sm-12 mt-3\">\r\n    <iq-card class=\"iq-card\">\r\n      <div class=\"iq-card-header-toolbar d-flex align-items-center mx-auto\">\r\n        <h3 class=\"text-center mt-3 mb-3\">تعديل صور الاطروحة</h3>\r\n      </div>\r\n      <div class=\"iq-card-body p-3\">\r\n        <div class=\"user-post\" v-if=\"thesis.photos\">\r\n          <div class=\"d-grid grid-rows-2 grid-flow-col gap-3\">\r\n            <div\r\n              class=\"row-span-2 row-span-md-1\"\r\n              v-for=\"(image, index) in thesis.photos\"\r\n              :key=\"image.id\"\r\n            >\r\n              <img\r\n                :src=\"resolve_img_url(image)\"\r\n                alt=\"post-image\"\r\n                class=\"img-fluid rounded w-100\"\r\n              />\r\n              <hr />\r\n              <input\r\n                class=\"form-control\"\r\n                type=\"file\"\r\n                id=\"customFile2\"\r\n                ref=\"file\"\r\n                @input=\"uploadImage(index, $event.target.files[0])\"\r\n              />\r\n              <small v-if=\"errors[index]\" style=\"color: red\"\r\n                ><p>الرجاء اختيار صورة اولا</p></small\r\n              >\r\n              <button\r\n                type=\"\"\r\n                @click=\"updatePhoto(image, index)\"\r\n                class=\"btn d-block btn-primary mt-3 mb-3 w-75 mx-auto\"\r\n              >\r\n                تعديل\r\n              </button>\r\n              <button\r\n                type=\"\"\r\n                @click=\"deletePhoto(image)\"\r\n                class=\"btn d-block btn-danger mt-3 mb-3 w-75 mx-auto\"\r\n                v-if=\"photosCount > 1\"\r\n              >\r\n                حذف\r\n              </button>\r\n            </div>\r\n            <div\r\n              class=\"row-span-2 row-span-md-1\"\r\n              v-if=\"photosCount < 1\"\r\n            >\r\n              <img\r\n                src=\"@/assets/images/stage2.png\"\r\n                alt=\"post-image\"\r\n                class=\"img-fluid rounded w-100\"\r\n              />\r\n              <hr />\r\n              <input\r\n                class=\"form-control\"\r\n                type=\"file\"\r\n                id=\"customFile2\"\r\n                ref=\"file\"\r\n                @input=\"uploadImage(2, $event.target.files[0])\"\r\n              />\r\n              <small v-if=\"errors[2]\" style=\"color: red\"\r\n                ><p>الرجاء اختيار صورة اولا</p></small\r\n              >\r\n              <button\r\n                type=\"\"\r\n                class=\"btn d-block btn-primary mt-3 mb-3 w-75 mx-auto\"\r\n                @click=\"uploadNewThesisImage()\"\r\n              >\r\n                رفع صورة\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </iq-card>\r\n  </div>\r\n  </div>\r\n\r\n \r\n</template>\r\n<script>\r\nimport thesisServices from \"../../api/thesisServices\";\r\nimport useVuelidate from \"@vuelidate/core\";\r\nimport { required, integer, requiredIf } from \"@vuelidate/validators\";\r\nimport IqCard from \"../../components/custom/cards/iq-card.vue\";\r\nexport default {\r\n  name: \"UpdateQuestion\",\r\n  async created() {\r\n    this.thesisToupdate = await thesisServices.getById(this.$route.params.id);\r\n    this.user_book_id = this.thesisToupdate.user_book.id;\r\n    this.book = this.thesisToupdate.user_book.book;\r\n    this.thesis.text = this.thesisToupdate.thesis_text;\r\n    this.thesis.ending_page = this.thesisToupdate.ending_page;\r\n    this.thesis.starting_page = this.thesisToupdate.starting_page;\r\n    this.thesis.photos = this.thesisToupdate.photos;\r\n    await this.getPhotosCount();\r\n    console.log(this.photosCount);\r\n  },\r\n  components: { IqCard },\r\n  setup() {\r\n    return { v$: useVuelidate() };\r\n  },\r\n  data() {\r\n    return {\r\n      user_book_id: 0,\r\n      loader: false,\r\n      photosCount: 0,\r\n      thesis: {\r\n        text: \"\",\r\n        starting_page: \"\",\r\n        ending_page: \"\",\r\n      },\r\n      book: [],\r\n      upload: [],\r\n      files: [[], [], []],\r\n      message: \"\",\r\n      thesisToupdate: [],\r\n      errors: [false, false, false],\r\n      pageError: \"\",\r\n    };\r\n  },\r\n  validations() {\r\n    return {\r\n      thesis: {\r\n        text: {\r\n          required,\r\n        },\r\n        starting_page: {\r\n          required,\r\n          valdiatePages: this.validatePages,\r\n        },\r\n        ending_page: {\r\n          required,\r\n          valdiatePages: this.validatePages,\r\n        },\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    async uploadNewThesisImage() {\r\n      await thesisServices.uploadPhoto(this.files[2], this.thesisToupdate.id);\r\n      window.location.reload();\r\n    },\r\n\r\n    async getPhotosCount() {\r\n      const count = await thesisServices.getPhotosCount(this.user_book_id);\r\n      this.photosCount = count;\r\n    },\r\n    async deletePhoto(image) {\r\n      await thesisServices.deletePhoto(image.id);\r\n      window.location.reload();\r\n    },\r\n    validatePages() {\r\n      const error =\r\n        parseInt(this.thesis.starting_page) < parseInt(this.thesis.ending_page);\r\n\r\n      if (!error)\r\n        this.pageError = \"يجب ان تكون صفحة البداية اقل من صفحة النهاية\";\r\n      else this.pageError = \"\";\r\n      return error;\r\n    },\r\n\r\n    removeEmojis(thesis) {\r\n      var regex = /(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|\\ud83c[\\ude32-\\ude3a]|\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/g;\r\n      return thesis.replace(regex, '');\r\n    },\r\n\r\n    async submit() {\r\n      this.thesis.text = this.removeEmojis(this.thesis.text)\r\n      this.v$.$touch();\r\n      if (!this.v$.thesis.$invalid) {\r\n        this.message = \"\";\r\n        this.loader = true;\r\n        const thesis = await thesisServices.updateThesis(\r\n          this.thesis,\r\n          this.$route.params.id\r\n        );\r\n\r\n        this.loader = false;\r\n        this.message = \"تم التعديل بنجاح\";\r\n      }\r\n    },\r\n    back() {\r\n      this.$router.push({\r\n        name: \"achievement.theses\",\r\n        params: { id: this.thesisToupdate.user_book.book.id },\r\n      });\r\n    },\r\n    resolve_img_url: function (image) {\r\n      const url = `http://localhost:8000/api/thesises/image?path=${image.path}`;\r\n      return url;\r\n    },\r\n    async updatePhoto(image, index) {\r\n      if (this.files[index].length === 0) {\r\n        this.errors[index] = true;\r\n      } else {\r\n        const res = await thesisServices.updatePicture(\r\n          this.files[index],\r\n          image.path\r\n        );\r\n        this.thesis.photos[index] = res;\r\n      }\r\n    },\r\n\r\n    uploadImage(index, file) {\r\n      this.files[index] = file;\r\n      this.errors[index] = false;\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./update.vue?vue&type=template&id=011bf2c4\"\nimport script from \"./update.vue?vue&type=script&lang=js\"\nexport * from \"./update.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\someO\\\\Desktop\\\\vue\\\\certificates-frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["createThesis","thesis","userbook_id","formData","FormData","append","text","pageEnd","pageStart","image_1","api","headers","error","console","log","response","updatePicture","image","path","data","reviewThesis","id","deleteThesis","acceptThesis","status","thesisId","user_book_id","reviewer_id","userInfoService","rejectRetardThesis","note","reviews","addDegree","mark","auditor_id","degree","updateThesis","getById","getByBook","bookID","getByUserBookStatus","getByUserBook","deletePhoto","getPhotosCount","uploadPhoto","class","_createElementVNode","src","_imports_0","alt","value","style","for","_imports_1","_hoisted_18","type","href","_hoisted_35","_imports_2","_hoisted_43","_createElementBlock","_createVNode","_component_iq_card","_hoisted_2","_hoisted_4","$data","onSubmit","$options","name","$setup","starting_page","$model","$event","_hoisted_7","_Fragment","_renderList","pages","i","index","key","_hoisted_8","$error","_toDisplayString","ending_page","_hoisted_11","_hoisted_12","_hoisted_15","rows","placeholder","_hoisted_19","onClick","_hoisted_24","_hoisted_27","photos","_hoisted_32","ref","onInput","target","files","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_40","_hoisted_41","_hoisted_44","created","thesisServices","$route","params","thesisToupdate","user_book","book","thesis_text","photosCount","components","IqCard","setup","v$","useVuelidate","loader","upload","message","errors","pageError","validations","required","valdiatePages","this","validatePages","methods","uploadNewThesisImage","window","location","reload","count","parseInt","removeEmojis","regex","replace","submit","$touch","$invalid","back","$router","push","resolve_img_url","url","updatePhoto","length","res","uploadImage","file","__exports__","render"],"sourceRoot":""}